{
  "name": "1c-platform-tools",
  "displayName": "1C Platform Tools",
  "description": "Расширение для Visual Studio Code с инструментами разработки для экосистемы 1C. Предоставляет удобный интерфейс для работы с проектами 1C, включая разбор обработок, отчетов и конфигураций.",
  "keywords": [
    "1c",
    "1с",
    "1c platform",
    "1c enterprise",
    "1с предприятие",
    "bsl"
  ],
  "version": "0.3.1",
  "publisher": "yellow-hammer",
  "repository": {
    "type": "git",
    "url": "https://github.com/yellow-hammer/1c-platform-tools"
  },
  "license": "MIT",
  "author": {
    "name": "Ivan Karlo",
    "email": "i.karlo@outlook.com",
    "url": "https://johnnyshut.github.io/"
  },
  "contributors": [
    "Ivan Karlo (i.karlo@outlook.com)"
  ],
  "icon": "resources/1c-icon.png",
  "galleryBanner": {
    "color": "#0000FF",
    "theme": "dark"
  },
  "engines": {
    "vscode": "^1.103.0",
    "node": ">=20.0.0"
  },
  "categories": [
    "Other",
    "Programming Languages",
    "Snippets",
    "Testing"
  ],
  "activationEvents": [
    "workspaceContains:packagedef",
    "onCommand:1c-platform-tools.dependencies.initializePackagedef"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "1c-platform-tools",
          "title": "1C Platform Tools",
          "icon": "resources/1c-icon.svg",
          "when": "1c-platform-tools.is1CProject == true"
        }
      ]
    },
    "views": {
      "1c-platform-tools": [
        {
          "id": "1c-platform-tools",
          "name": "1C Platform Tools",
          "when": "1c-platform-tools.is1CProject == true"
        }
      ]
    },
    "commands": [
      {
        "command": "1c-platform-tools.refresh",
        "title": "Обновить",
        "icon": "$(refresh)",
        "category": "1C: Дерево"
      },
      {
        "command": "1c-platform-tools.settings",
        "title": "Настройки",
        "icon": "$(gear)",
        "category": "1C: Дерево"
      },
      {
        "command": "1c-platform-tools.favorites.configure",
        "title": "Настроить избранное",
        "icon": "$(star-full)",
        "category": "1C: Дерево"
      },
      {
        "command": "1c-platform-tools.infobase.createEmpty",
        "title": "Создать пустую ИБ",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.infobase.updateDatabase",
        "title": "Постобработка обновления",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.infobase.blockExternalResources",
        "title": "Запретить работу с внешними ресурсами",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.infobase.initialize",
        "title": "Инициализировать данные",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.infobase.dumpToDt",
        "title": "Выгрузить в dt",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.infobase.loadFromDt",
        "title": "Загрузить из dt",
        "category": "1C: Информационная база"
      },
      {
        "command": "1c-platform-tools.configuration.loadFromSrc",
        "title": "Загрузить конфигурацию из src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.loadFromSrc.init",
        "title": "Инициализировать конфигурацию из src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.loadIncrementFromSrc",
        "title": "Загрузить изменения (git diff)",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.loadFromFilesByList",
        "title": "Загрузить из objlist.txt",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.loadFromCf",
        "title": "Загрузить конфигурацию из 1Cv8.cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.dumpToSrc",
        "title": "Выгрузить конфигурацию в src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.dumpIncrementToSrc",
        "title": "Выгрузить изменения в src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.dumpToCf",
        "title": "Выгрузить конфигурацию в 1Cv8.cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.dumpToDist",
        "title": "Выгрузить файл поставки в 1Cv8dist.cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.build",
        "title": "Собрать 1Cv8.cf из src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.configuration.decompile",
        "title": "Разобрать 1Cv8.cf в src/cf",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.extensions.loadFromSrc",
        "title": "Загрузить расширения из src/cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.extensions.loadFromCfe",
        "title": "Загрузить расширение из *.cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.extensions.dumpToSrc",
        "title": "Выгрузить расширения в src/cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.extensions.dumpToCfe",
        "title": "Выгрузить расширение в *.cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.extensions.build",
        "title": "Собрать *.cfe из src/cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.extensions.decompile",
        "title": "Разобрать *.cfe в src/cfe",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.externalProcessors.build",
        "title": "Собрать внешнюю обработку",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.externalProcessors.decompile",
        "title": "Разобрать внешнюю обработку",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.externalReports.build",
        "title": "Собрать внешний отчет",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.externalReports.decompile",
        "title": "Разобрать внешний отчет",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.externalFiles.clearCache",
        "title": "Очистить кэш",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.dependencies.initializePackagedef",
        "title": "Инициализировать packagedef",
        "category": "1C: Зависимости"
      },
      {
        "command": "1c-platform-tools.dependencies.updateOpm",
        "title": "Обновить OPM",
        "category": "1C: Зависимости"
      },
      {
        "command": "1c-platform-tools.dependencies.install",
        "title": "Установить зависимости",
        "category": "1C: Зависимости"
      },
      {
        "command": "1c-platform-tools.dependencies.remove",
        "title": "Удалить зависимости",
        "category": "1C: Зависимости"
      },
      {
        "command": "1c-platform-tools.build.configuration",
        "title": "Собрать конфигурацию",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.build.extensions",
        "title": "Собрать расширения",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.build.externalProcessor",
        "title": "Собрать внешнюю обработку",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.build.externalReport",
        "title": "Собрать внешний отчет",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.decompile.configuration",
        "title": "Разобрать конфигурацию",
        "category": "1C: Конфигурация"
      },
      {
        "command": "1c-platform-tools.decompile.externalProcessor",
        "title": "Разобрать внешнюю обработку",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.decompile.externalReport",
        "title": "Разобрать внешний отчет",
        "category": "1C: Внешние файлы"
      },
      {
        "command": "1c-platform-tools.decompile.extension",
        "title": "Разобрать расширение",
        "category": "1C: Расширения"
      },
      {
        "command": "1c-platform-tools.run.enterprise",
        "title": "Запустить Предприятие",
        "category": "1C: Запуск",
        "icon": "$(play)"
      },
      {
        "command": "1c-platform-tools.run.designer",
        "title": "Запустить Конфигуратор",
        "category": "1C: Запуск",
        "icon": "$(tools)"
      },
      {
        "command": "1c-platform-tools.test.xunit",
        "title": "XUnit тесты",
        "category": "1C: Тестирование"
      },
      {
        "command": "1c-platform-tools.test.syntaxCheck",
        "title": "Синтаксический контроль",
        "category": "1C: Тестирование"
      },
      {
        "command": "1c-platform-tools.test.vanessa",
        "title": "Vanessa тесты",
        "category": "1C: Тестирование"
      },
      {
        "command": "1c-platform-tools.test.allure",
        "title": "Allure отчет",
        "category": "1C: Тестирование"
      },
      {
        "command": "1c-platform-tools.setVersion.configuration",
        "title": "Конфигурации",
        "category": "1C: Установить версию"
      },
      {
        "command": "1c-platform-tools.setVersion.allExtensions",
        "title": "Все",
        "category": "1C: Установить версию"
      },
      {
        "command": "1c-platform-tools.setVersion.extension",
        "title": "Расширения",
        "category": "1C: Установить версию"
      },
      {
        "command": "1c-platform-tools.setVersion.report",
        "title": "Внешнего отчёта",
        "category": "1C: Установить версию"
      },
      {
        "command": "1c-platform-tools.setVersion.processor",
        "title": "Внешней обработки",
        "category": "1C: Установить версию"
      },
      {
        "command": "1c-platform-tools.launch.view",
        "title": "Просмотр задач (workspace)",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.launch.run",
        "title": "Запустить задачу",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.oscript.run",
        "title": "Запустить задачу oscript (opm run)",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.oscript.addTask",
        "title": "Добавить задачу oscript",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.launch.edit",
        "title": "Редактировать задачи",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.launch.editConfigurations",
        "title": "Редактировать конфигурации запуска",
        "category": "1C: Конфигурации запуска"
      },
      {
        "command": "1c-platform-tools.file.open",
        "title": "Открыть файл",
        "category": "1C: Задачи"
      },
      {
        "command": "1c-platform-tools.config.env.edit",
        "title": "Редактировать env.json",
        "category": "1C: Конфигурации запуска"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "1c-platform-tools.refresh",
          "when": "view == 1c-platform-tools",
          "group": "navigation"
        },
        {
          "command": "1c-platform-tools.favorites.configure",
          "when": "view == 1c-platform-tools",
          "group": "navigation"
        },
        {
          "command": "1c-platform-tools.settings",
          "when": "view == 1c-platform-tools",
          "group": "navigation"
        }
      ],
      "editor/context": []
    },
    "configuration": {
      "title": "1C Platform Tools",
      "properties": {
        "1c-platform-tools.onescriptPath": {
          "type": "string",
          "default": "oscript",
          "description": "Путь к исполняемому файлу OneScript"
        },
        "1c-platform-tools.opm.path": {
          "type": "string",
          "default": "opm",
          "description": "Путь к opm (OneScript Package Manager)"
        },
        "1c-platform-tools.vrunner.path": {
          "type": "string",
          "default": "vrunner",
          "description": "Путь к vrunner (vanessa-runner)"
        },
        "1c-platform-tools.useIbcmd": {
          "type": "boolean",
          "default": false,
          "description": "Использовать утилиту ibcmd вместо конфигуратора для выполнения операций с информационной базой. ibcmd - утилита командной строки, которая ускоряет выполнение операций (загрузка, выгрузка, сборка, разбор конфигурации и расширений) без запуска графического интерфейса Конфигуратора. Примечание: при использовании Docker (docker.enabled = true) ibcmd используется автоматически, так как в Docker нет GUI."
        },
        "1c-platform-tools.vrunner.initSettingsPath": {
          "type": "string",
          "default": "./tools/vrunner.init.json",
          "description": "Путь к файлу настроек инициализации vrunner (vrunner.init.json)"
        },
        "1c-platform-tools.paths.out": {
          "type": "string",
          "default": "build/out",
          "description": "Путь к результатам сборки"
        },
        "1c-platform-tools.paths.cf": {
          "type": "string",
          "default": "src/cf",
          "description": "Путь к исходному коду конфигурации"
        },
        "1c-platform-tools.paths.cfe": {
          "type": "string",
          "default": "src/cfe",
          "description": "Путь к исходному коду расширений"
        },
        "1c-platform-tools.paths.epf": {
          "type": "string",
          "default": "src/epf",
          "description": "Путь к исходному коду внешних обработок"
        },
        "1c-platform-tools.paths.erf": {
          "type": "string",
          "default": "src/erf",
          "description": "Путь к исходному коду внешних отчетов"
        },
        "1c-platform-tools.allure.path": {
          "type": "string",
          "default": "allure",
          "description": "Путь к allure"
        },
        "1c-platform-tools.docker.enabled": {
          "type": "boolean",
          "default": false,
          "description": "Использовать Docker для выполнения команд vrunner. Включает выполнение команд vrunner через Docker-контейнер вместо локального выполнения."
        },
        "1c-platform-tools.docker.image": {
          "type": "string",
          "default": "",
          "description": "Docker-образ для выполнения команд vrunner. Образ должен содержать установленную платформу 1С:Предприятие и vanessa-runner. Пример: 'myregistry/onec-image:8.3.25' или 'localhost/onec-image:latest'. Если не указан, будет показана ошибка с инструкцией."
        },
        "1c-platform-tools.logLevel": {
          "type": "string",
          "enum": [
            "error",
            "warnings",
            "info",
            "debug"
          ],
          "default": "info",
          "description": "Уровень логирования в панель Output: error — только ошибки, warnings — ошибки и предупреждения, info — плюс информационные сообщения, debug — полный вывод для диагностики."
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src",
    "test": "vscode-test",
    "package": "vsce package"
  },
  "overrides": {
    "diff": "^8.0.3"
  },
  "devDependencies": {
    "@types/node": "22.x",
    "@types/vscode": "^1.103.0",
    "@vscode/test-cli": "^0.0.11",
    "@vscode/test-electron": "^2.5.2",
    "@vscode/vsce": "^3.7.1",
    "eslint": "^9.39.1",
    "typescript": "^5.9.3",
    "typescript-eslint": "^8.48.1"
  }
}
